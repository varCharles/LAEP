// Generated by CoffeeScript 1.6.1
var AppRouter,AppView,MainView,Tweet,TweetView,Tweets,TweetsCollection,TwitterRouter,UserView,__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};Tweet=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}__extends(t,e);t.prototype.idAttribute="from_user_id";return t}(Backbone.Model);TweetsCollection=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}__extends(t,e);t.prototype.model=Tweet;t.prototype.url=function(){return"https://search.twitter.com/search.json?callback=?&q="+this.query};t.prototype.initialize=function(){this.query="backbonejs";return this.fetch()};t.prototype.parse=function(e){return e.results};return t}(Backbone.Collection);AppView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}__extends(t,e);t.prototype.el="#twitter-app";t.prototype.initialize=function(){_.bindAll(this);this.collection=Tweets;this.tweet_list=$("#tweets-list");this.search_field=$("#search-field");this.user_div=$("#user-details");this.listenTo(this.collection,"add",this.addTweet);return this.listenTo(this.collection,"reset",this.clearTweets)};t.prototype.events=function(){return{"click #init-search":"initSearch"}};t.prototype.clearTweets=function(){return this.tweet_list.html("")};t.prototype.addTweet=function(e){var t;t=new TweetView({model:e});return this.tweet_list.append(t.render().el)};t.prototype.initSearch=function(){Tweets.reset();Tweets.query=this.search_field.val();return Tweets.fetch()};t.prototype.showUser=function(e){var t,n;t=this.collection.get(e);console.log(e,t);n=new UserView({model:t});return this.user_div.append(n.render().el)};t.prototype.hideUser=function(e){return this.user_div.html("")};return t}(Backbone.View);TweetView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}__extends(t,e);t.prototype.template=_.template($("#tweets-template").html());t.prototype.render=function(){$(this.el).append(this.template(this.model.toJSON()));return this};return t}(Backbone.View);UserView=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}__extends(t,e);t.prototype.template=_.template($("#user-template").html());t.prototype.events=function(){return{"click .close":"hideMe"}};t.prototype.render=function(){$(this.el).append(this.template(this.model.toJSON()));return this};t.prototype.hideMe=function(){return MainView.hideUser()};return t}(Backbone.View);AppRouter=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}__extends(t,e);t.prototype.routes={"user/:id":"userDetails"};t.prototype.userDetails=function(e){return MainView.showUser(e)};return t}(Backbone.Router);Tweets=new TweetsCollection;MainView=new AppView;TwitterRouter=new AppRouter;Backbone.history.start();