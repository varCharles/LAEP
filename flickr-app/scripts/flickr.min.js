"use strict";angular.module("flickrApp").controller("PhotosCtrl",function(e,t,n){e.sort_order="title";e.loading=!0;e.searchtags=t.tag||"green";e.searchPhotos=function(){e.loading=!0;e.photos=[];n.getPhotos(e.searchtags).then(function(t){e.photos=t;e.loading=!1})};e.searchPhotos()}).controller("PhotoCtrl",function(e,t,n,r){var i=n.photoID;e.photo_size="medium";r.getPhotoMeta(i).then(function(t){e.photoMeta=t});r.getPhoto(i).then(function(t){e.photo=t});e.setPhotoSize=function(t){e.photo_size=t};e.lookupTags=function(e){t.path("/photos/"+e)}}).service("flickrService",function(e){var t,n;t="2bb0b524a3e3cbb9ceaea74b30dabf93";n="http://api.flickr.com/services/rest/";return{getPhotos:function(r){var i={method:"flickr.photos.search",api_key:t,per_page:36,format:"json",tags:r,extras:"url_sq,url_m,description,owner_name",jsoncallback:"JSON_CALLBACK"};return e.jsonp(n,{params:i}).then(function(e){return e.data.photos.photo})},getPhotoMeta:function(r){var i={method:"flickr.photos.getInfo",api_key:t,format:"json",photo_id:r,jsoncallback:"JSON_CALLBACK"};return e.jsonp(n,{params:i}).then(function(e){return e.data.photo})},getPhoto:function(r){var i={method:"flickr.photos.getSizes",api_key:t,format:"json",photo_id:r,jsoncallback:"JSON_CALLBACK"};return e.jsonp(n,{params:i}).then(function(e){var t={};t.small=_.findWhere(e.data.sizes.size,{label:"Small"});t.medium=_.findWhere(e.data.sizes.size,{label:"Medium"});t.large=_.findWhere(e.data.sizes.size,{label:"Original"});return t})}}});